(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(4515)}])},4515:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return b}});var n=t(5893),s=t(9008),i=t.n(s),l=t(7294),c=t(9394),r=t(8877),d=t.n(r),o=t(9495),u=t(8102),h=t(3977),p=t(7004);let m=(0,h.ZF)({apiKey:"AIzaSyBPx1F8yh4YtG3d3L8ddOWKqc_Ic1SH5jk",authDomain:"waiverapp-af9d8.firebaseapp.com",projectId:"waiverapp-af9d8",storageBucket:"waiverapp-af9d8.appspot.com",messagingSenderId:"79747709016",appId:"1:79747709016:web:75bd26aaec79806bc8722d"}),x=(0,p.$C)(m),g=(0,p.V1)(x,"sendEmail");async function f(e,a){try{let t=await g({to:e,subject:"Signed Document",content:"Please find the signed document attached.",attachments:[{content:a,filename:"signed-document.pdf",type:"application/pdf",disposition:"attachment"}]});t.data.success?console.log("Email sent successfully"):console.error("Failed to send email")}catch(e){console.error("Error while sending email:",e)}}let j=e=>{let a,{isVisible:t,toggleModal:s,onSignatureEnd:i,pdfUrl:l,participantName:c,participantAddress:r,date:h,isMinor:p,guardianName:m,guardianRelationship:x}=e,g=async()=>{let e=await fetch(l).then(e=>e.arrayBuffer()),t=await o.PDFDocument.load(e),n=await t.embedPng(a.toDataURL()),d=n.scale(.5),g=t.getPageCount()-1,j=t.getPage(g);j.drawImage(n,{x:p?120:200,y:p?200:465,width:d.width,height:d.height});let v=await t.embedFont(o.StandardFonts.Helvetica);j.drawText(c,{x:200,y:560,size:12,font:v}),j.drawText(r,{x:220,y:535,size:12,font:v}),j.drawText(h,{x:130,y:490,size:12,font:v}),p&&(j.drawText(c,{x:355,y:350,size:12,font:v}),j.drawText(m,{x:220,y:315,size:12,font:v}),j.drawText(x,{x:210,y:290,size:12,font:v}),j.drawText(h,{x:130,y:225,size:12,font:v}));let N=await t.save(),w=new Blob([N],{type:"application/pdf"});(0,u.saveAs)(w,"signed-document.pdf"),f("jacobberman1234@gmail.com",t.saveAsBase64());let b=a.toDataURL();i(b),s()};return t&&(0,n.jsx)("div",{className:"modal",children:(0,n.jsxs)("div",{className:"modalContent",children:[(0,n.jsx)("h2",{children:"Sign Document"}),(0,n.jsx)(d(),{ref:e=>{a=e},canvasProps:{width:500,height:200,className:"sigCanvas"},onEnd:()=>i(a.toDataURL())}),(0,n.jsxs)("div",{className:"buttons",children:[(0,n.jsx)("button",{onClick:s,children:"Close"}),(0,n.jsx)("button",{onClick:g,children:"Submit"}),(0,n.jsx)("button",{onClick:()=>a.clear(),children:"Clear"})]})]})})},v=e=>{let{goToPrevPage:a,goToNextPage:t,numPages:s,currentPage:i,toggleModal:l}=e;return(0,n.jsxs)("div",{className:"flex justify-center mt-4",children:[(0,n.jsx)("button",{onClick:a,className:"mx-2",children:"Prev Page"}),i>s&&null!=s?(0,n.jsx)("button",{onClick:l,className:"sign-button",children:"Sign Document"}):(0,n.jsx)("button",{onClick:t,className:"mx-2",children:"Next Page"})]})},N=e=>{let{file:a,currentPage:t,onDocumentLoadSuccess:s}=e;return(0,n.jsx)(c.BB,{file:a,onLoadSuccess:s,renderMode:"canvas",loading:"Loading PDF...",children:(0,n.jsx)(c.T3,{pageNumber:t,renderTextLayer:!1,renderAnnotationLayer:!1})})},w=e=>{let{participantName:a,participantAddress:t,date:s,handleNameChange:i,handleAddressChange:l,handleDateChange:c,isMinor:r,handleIsMinorChange:d,guardianName:o,handleGuardianNameChange:u,guardianRelationship:h,handleGuardianRelationshipChange:p,email:m,setEmail:x}=e;return(0,n.jsxs)("div",{className:"form-container",children:[(0,n.jsx)("input",{type:"text",value:a,onChange:i,placeholder:"Participant's Name",className:"text-field"}),(0,n.jsx)("input",{type:"text",value:t,onChange:l,placeholder:"Participant's Address",className:"text-field"}),(0,n.jsx)("input",{type:"date",value:s,onChange:c,placeholder:"Date",className:"participants-name"}),(0,n.jsxs)("div",{className:"checkbox-container mt-2",children:[(0,n.jsx)("input",{type:"checkbox",checked:r,onChange:d,className:"checkbox-input mr-2"}),(0,n.jsx)("label",{children:"Is a minor?"})]}),r&&(0,n.jsxs)("div",{className:"form-container",children:[(0,n.jsx)("input",{type:"text",value:o,onChange:u,placeholder:"Guardian's Name",className:"text-field"}),(0,n.jsx)("input",{type:"text",value:h,onChange:p,placeholder:"Guardian's Relationship",className:"text-field"})]}),(0,n.jsx)("div",{className:"form-container",children:(0,n.jsx)("input",{type:"email",value:m,onChange:x,placeholder:"Email",className:"text-field"})})]})};function b(){let[e,a]=(0,l.useState)(!1),[t,s]=(0,l.useState)(null),[c,r]=(0,l.useState)(1),[d,o]=(0,l.useState)(null),u="/WoodfinZipliningWaiver.pdf",[h,p]=(0,l.useState)(""),[m,x]=(0,l.useState)(""),[g,f]=(0,l.useState)(""),[b,y]=(0,l.useState)(!1),[C,S]=(0,l.useState)(""),[P,k]=(0,l.useState)(""),[D,T]=(0,l.useState)(""),_=e=>{let{numPages:a}=e;s(a)},E=()=>{a(!e)},A=()=>{c<=t&&r(c+1)},L=()=>{c>1&&r(c-1)},z=e=>{p(e.target.value)},F=e=>{x(e.target.value)},I=e=>{f(e.target.value)},B=e=>{y(e.target.checked)},R=e=>{S(e.target.value)},G=e=>{k(e.target.value)},M=e=>{T(e.target.value)};return(0,n.jsxs)("div",{children:[(0,n.jsx)(i(),{children:(0,n.jsx)("title",{children:"PDF Signing App"})}),(0,n.jsxs)("main",{children:[(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[c>t&&null!=t?(0,n.jsx)(w,{participantName:h,participantAddress:m,date:g,handleNameChange:z,handleAddressChange:F,handleDateChange:I,isMinor:b,handleIsMinorChange:B,guardianName:C,handleGuardianNameChange:R,guardianRelationship:P,handleGuardianRelationshipChange:G,email:D,setEmail:M}):(0,n.jsx)(N,{file:u,currentPage:c,onDocumentLoadSuccess:_}),(0,n.jsx)(v,{goToPrevPage:L,goToNextPage:A,numPages:t,currentPage:c,toggleModal:E})]}),(0,n.jsx)(j,{isVisible:e,toggleModal:E,pdfUrl:u,participantAddress:m,participantName:h,date:g,isMinor:b,guardianName:C,guardianRelationship:P})]})]})}c.v0.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(c.v0.version,"/pdf.worker.min.js")},9349:function(){},9080:function(){},7588:function(){},3071:function(){},5232:function(){}},function(e){e.O(0,[701,55,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);